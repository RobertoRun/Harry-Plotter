<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta name="author" content="niko" />
	<title>Harry Plotter - Demo page</title>
	<style>
		body { margin:0; padding:0; font:normal 9pt "Sans Serif","Trebuchet MS"; }
		form { display:block; width:670px; float:left; background-color:#aaa; }
		div.formcol { float:left; width:49%; }
		div.footer { clear:both; margin-top:10px; text-align:right; }
		form,#render { padding:3px; }
		pre { font-size:8pt; margin:0; padding:0; height:350px; overflow:auto; }
		table { font:normal 9pt "Sans Serif","Trebuchet MS"; }
		label { display:block; width:70px; float:left; text-align:right; Margin-right:5px; }
		input[type="button"],input[type="reset"] { font:bold 9pt "Sans Serif","Trebuchet MS"; border:none; background-color:#444; color:#fff; }
		input[type="text"],select { height:15px; font:normal 11px "Sans Serif","Trebuchet MS"; border:none; background-color:#ccc; }
		input.int { width:80px; }
		input.color { width:120px; }
		input.font { width:240px; }
		input.data { width:280px; }
		#render { display:block; float:left; }
		#js { background-color:#888; color:#fff; }
		h1 { font-size:12pt; margin:2px 0 3px 0; }
		h2 { font-size:10pt; background-color:#666; color:#fff; margin:4px 0; clear:both; }
	</style>
	<script src="jquery/jquery.js"></script>
	<script src="jquery/tools.js"></script>
	<script src="jquery/colorpicker/colorpicker.js"></script>
	<link rel="stylesheet" href="jquery/colorpicker/colorpicker.css" type="text/css" />
	<script src="harry.js"></script>
	<script>
		var MAXDATA=16;
		
		var str2nums=function(str){
			var n=[],s=str.split(','),i;
			for(i=0;i<s.length;i++) n.push(parseFloat(s[i],10));
			return n;
		};
		
		$(document).ready(function(){
			
			$(".color").colorPicker({sharped:true});
			
			$("input.rnd").click(function(){
				var i,t=$(this).attr('target'), d=[];
				for(i=0;i<MAXDATA;++i) d.push(Math.floor(Math.random()*100));
				$('#'+t).val(d.join(','));
			});
			
			var build=function(){
				var o={container:'container'},v,w;

				//get datas
				var i,d=[],dt=[],dc=[];
				for(i=1;i<4;i++)
					if((w=$('#data'+i).val()).length) {
						if((v=$('#title'+i).val()).length) {
							while(dt.length<d.length) dt.push(false);
							dt.push(v);
						}
						if((v=$('#color'+i).val()).length) {
							while(dc.length<d.length) dc.push(false);
							dc.push(v);
						}
						d.push(str2nums(w));
					}
				if(d.length) {
					o.datas=(d.length>1)?d:d[0];
					if(dt.length) o.datitle=dt.length>1?dt:dt[0];
					if(dc.length) o.color=dc.length>1?dc:dc[0];
				}

				//get title
				if((v=$('#titletext').val()).length){
					o.title={text:v};
					if((v=$('#titlefont').val()).length) o.title.font=v;
					if((v=$('#titlecolor').val()).length) o.title.color=v;
					if((v=$('#titlex').val()).length) o.title.x=v;
					if((v=$('#titley').val()).length) o.title.y=v;
				}

				//get grid
				if((v=$('#gridx').val()).length+(w=$('#gridy').val()).length){
					o.grid={};
					if(v.length) o.grid.x=/none|false/.test(v)?v:str2nums(v);
					if(w.length) o.grid.y=/none|false/.test(w)?w:str2nums(w);
					if((v=$('#gridcolor').val()).length) o.grid.color=v;
				}

				//get labels
				if((v=$('#margins').val()).length) o.margins=str2nums(v);
				if((v=$('#labelx').val()).length+(w=$('#labely').val()).length){
					o.labels={};
					if(v.length) o.labels.x=v.split(/[,:\|]+/);
					if(w.length) o.labels.y=str2nums(w);
					if((v=$('#labelfont').val()).length) o.labels.font=v;
					if((v=$('#labelcolor').val()).length) o.labels.color=v;
				}

				//get render
				if((v=$('#width').val()).length) o.width=parseInt(v,10);
				if((v=$('#height').val()).length) o.height=parseInt(v,10);
				if((v=$('#mode').val()).length) o.mode=v;
				if((v=$('#fill').val()).length) o.fill=v;
				if((v=$('#opacity').val()).length) o.opacity=parseFloat(v,10);
				if((v=$('#linewidth').val()).length) o.linewidth=v;
				if((v=$('#linejoin').val()).length) o.linejoin=v;

				//show
				$('#js pre').text("new harry("+json.tidy(json.encode(o,true))+")");
				$('#container').empty();
				new harry(o);
			};
			$("input.generate").click(build);
			build();
			
		});
	</script>
</head>
<body>
	<h1>Harry Plotter - Generator page [<a href="index.html">demo</a>] [<a href="harry.js">download</a>]</h1>
	<form>
		
		<h2>Title</h2>
		<div class="formcol">
			<label for="titletext">title.text</label><input type="text" id="titletext" /><br/>
			<label for="titlefont">title.font</label><input type="text" id="titlefont" class="font" value='bold 12px "Sans Serif","Trebuchet MS"' /><br/>
			<label for="titlecolor">title.color</label><input type="text" id="titlecolor" class="color" value="" /><br/>
		</div>
		<div class="formcol">
			<label for="titlex">title.x</label><input type="text" id="titlex" class="int" />px<br/>
			<label for="titley">title.y</label><input type="text" id="titley" class="int" />px<br/>
		</div>
		
		<h2>Datas</h2>
		<table>
			<tr><th>#</th><th>datas</th><th>title</th><th>color</th></tr>
			<tr>
				<td>#1</td>
				<td><input type="text" id="data1" title="y1,y2,y3..." value="1,2,4,8,16,32,64,32,16,8,4,2,1" class="data" /><input type="button" class="rnd" value="random" target="data1" /></td>
				<td><input type="text" id="title1" value="" /></td>
				<td><input type="text" id="color1" title="#rrggbb" value="" class="color" /></td>
			</tr>
			<tr>
				<td>#2</td>
				<td><input type="text" id="data2" title="y1,y2,y3..." value="" class="data" /><input type="button" class="rnd" value="random" target="data2" /></td>
				<td><input type="text" id="title2" value="" /></td>
				<td><input type="text" id="color2" title="#rrggbb" value="" class="color" /></td>
			</tr>
			<tr>
				<td>#3</td>
				<td><input type="text" id="data3" title="y1,y2,y3..." value="" class="data" /><input type="button" class="rnd" value="random" target="data3" /></td>
				<td><input type="text" id="title3" value="" /></td>
				<td><input type="text" id="color3" title="#rrggbb" value="" class="color" /></td>
			</tr>
		</table>
		
		<h2>Grid</h2>
		<div class="formcol">
			<label for="gridx">grid.x</label><input type="text" id="gridx" title="none or %,%,%..." value="" /><br/>
			<label for="gridy">grid.y</label><input type="text" id="gridy" title="none or %,%,%..." value="" /><br/>
		</div>
		<div class="formcol">
			<label for="gridcolor">grid.color</label><input type="text" id="gridcolor" title="#rrggbb" class="color" value="" /><br/>
		</div>
		
		<h2>Label</h2>
		<div class="formcol">
			<label for="margins">margins</label><input type="text" id="margins" title="top,right,bottom,left" value="" /><br/>
			<label for="labelfont">label.font</label><input type="text" id="labelfont" class="font" value='normal 9px "Sans Serif","Trebuchet MS"' /><br/>
			<label for="labelcolor">label.color</label><input type="text" id="labelcolor" class="color" value="" /><br/>
		</div>
		<div class="formcol">
			<label for="labelx">label.x</label><input type="text" id="labelx" title="labelx1,labelx2,.." value="" /><br/>
			<label for="labely">label.y</label><input type="text" id="labely" title="%,%,%..." value="" /><br/>
		</div>

		<h2>Rendering</h2>
		<div class="formcol">
			<label for="width">width</label><input type="text" id="width" class="int" value="" />px<br/>
			<label for="height">height</label><input type="text" id="height" class="int" value="" />px<br/>
			<label for="mode">mode</label><select id="mode"><option></option><option>line</option><option>pie</option><option>chart</option><option>river</option></select><br/>
		</div>
		<div class="formcol">
			<label for="fill">fill</label><select id="fill"><option></option><option>none</option><option>solid</option><option>vertical</option><option>horizontal</option><option>radial</option></select><br/>
			<label for="opacity">opacity</label><select id="opacity"><option></option><option value="0.1">0.1 - transparent</option><option>0.2</option><option>0.3</option><option>0.4</option><option value="0.5">0.5 - semi transparent</option><option>0.6</option><option>0.7</option><option>0.8</option><option>0.9</option><option value="1">1.0 - opaque</option></select><br/>
			<label for="linewidth">linewidth</label><select id="linewidth"><option></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option></select><br/>
			<label for="linejoin">linejoin</label><select id="linejoin"><option></option><option>round</option><option>miter</option><option>bevel</option></select><br/>
		</div>

		<div class="footer">
			<input type="reset" value="reset" />
			<input type="button" class="generate" value="generate" />
		</div>
	</form>
	<div id="render">
		<h2>Canvas</h2>
		<div id="container"></div>
		<h2>Javascript</h2>
		<div id="js"><pre></pre></div>
	</div>
</body>
</html>

