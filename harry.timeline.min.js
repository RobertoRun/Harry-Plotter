// harry plotter timeline serie generator - 0.2
// ~L~ nikomomo@gmail.com 2012-2014
// https://github.com/nikopol/Harry-Plotter
harry.timeline=function(){var h=function(a){var c=new Date(a);if(!isNaN(c))return c;if(/^(\d{4})\D(\d{2})\D(\d{2})(?:\D(\d{2}))?(?:\D(\d{2}))?(?:\D(\d{2}))?/.test(a))return new Date(RegExp.$1,RegExp.$2-1,RegExp.$3,RegExp.$4||0,RegExp.$5||0,RegExp.$6||0);console.error("unable to parse date ",a," please setup a parser");return null},v=function(a){return a.getFullYear()},w=function(a){return a.toISOString().substr(0,7)},x=function(a){return a.getFullYear()},y=function(a){return a.getDate()+" "+a.getHours()},z=function(a){return a.toTimeString().substr(0,5)},A=function(a){return a.toTimeString().substr(0,8)},B={eval:function(a){return a.getFullYear()},next:function(a){return a+1},date:function(a){return new Date(a+"-01-01T00:00:00Z")}},C={eval:function(a){return 100*a.getFullYear()+a.getMonth()+1},next:function(a){var c=Math.floor(a/100);a%=100;12>a?a++:(c++,a=1);return 100*c+a},date:function(a){a=("0000"+a).substr(-6);return new Date(a.substr(0,4)+"-"+a.substr(-2)+"-01T00:00:00Z")}},D={eval:function(a){return 1E4*
a.getFullYear()+100*a.getMonth()+a.getDate()},next:function(a){return this.eval(new Date(this.date(a).getTime()+864E5))},date:function(a){a=("0000"+a).substr(-8);return new Date(a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(-2)+"T00:00:00Z")}},E={eval:function(a){return Math.floor(a.getTime()/36E5)},next:function(a){return a+1},date:function(a){return new Date(36E5*a)}},F={eval:function(a){return Math.floor(a.getTime()/6E4)},next:function(a){return a+1},date:function(a){return new Date(6E4*a)}},G=
{eval:function(a){return Math.floor(a.getTime()/1E3)},next:function(a){return a+1},date:function(a){return new Date(1E3*a)}},e=function(a,c,d,h){var e=null,k=null,q=[],l=[],m=[],s=[],t={},g,f,b,r;a instanceof Array||(a=[a]);for(g in a){var p={},n=a[g];n.datas&&(n=n.datas);for(r in n){b=d(r);b=c.eval(b);if(null===e||b<e)e=b;if(null===k||b>k)k=b;var u=parseFloat(n[r]);p[b]=p[b]?p[b]+u:u}l.push(p);m.push(a[g].datas?{title:a[g].title,color:a[g].color}:{title:!1,color:!1})}for(f in l){a={values:[]};m[f].title&&
(a.title=m[f].title);m[f].color&&(a.color=m[f].color);if(0==f)for(b=e,f=0;b<=k;b=c.next(b),f++)s.push(h(c.date(b))),t[b]=f;for(b=e;b<=k;b=c.next(b))a.values.push(null);a.labels=s;q.push(a)}for(g in l)for(b in l[g])f=t[b],q[g].values[f]=l[g][b];return q};return{year:function(a,c,d){return e(a,B,c||h,d||v)},month:function(a,c,d){return e(a,C,c||h,d||w)},day:function(a,c,d){return e(a,D,c||h,d||x)},hour:function(a,c,d){return e(a,E,c||h,d||y)},minute:function(a,c,d){return e(a,F,c||h,d||z)},second:function(a,
c,d){return e(a,G,c||h,d||A)}}}();